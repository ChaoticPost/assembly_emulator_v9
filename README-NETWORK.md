# Настройка работы по сети

## Быстрый старт

### Вариант 1: Автоматический запуск (рекомендуется)
```powershell
.\start-dev.ps1
```

Этот скрипт запустит и фронтенд, и бэкенд одновременно.

### Вариант 2: Ручной запуск

#### 1. Запуск бэкенда:
```powershell
.\start-backend.ps1
```

Или вручную:
```powershell
cd backend
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

#### 2. Запуск фронтенда:
```powershell
cd frontend
npm run dev
```

## Доступ по сети

После запуска сервисы будут доступны:

### Локально:
- Фронтенд: http://localhost:5173
- Бэкенд: http://localhost:8000

### По локальной сети:
- Фронтенд: http://192.168.43.40:5173 (ваш IP может отличаться)
- Бэкенд: http://192.168.43.40:8000

Чтобы узнать ваш IP адрес:
```powershell
.\get-local-ip.ps1
```

## Настройка

### Автоматическое определение адреса API

Фронтенд автоматически определяет адрес бэкенда:
- Если фронтенд открыт не на localhost, используется тот же хост для бэкенда
- Например, если фронтенд на `http://192.168.43.40:5173`, бэкенд будет доступен на `http://192.168.43.40:8000`

### Ручная настройка API URL

Если нужно задать конкретный адрес бэкенда, создайте файл `.env` в папке `frontend`:

```env
VITE_API_URL=http://192.168.43.40:8000
```

## Проверка работы

1. Откройте фронтенд в браузере: http://192.168.43.40:5173
2. Откройте консоль разработчика (F12)
3. Проверьте, что запросы идут на правильный адрес бэкенда

## Проблемы и решения

### Бэкенд не доступен по сети
- Убедитесь, что бэкенд запущен с `--host 0.0.0.0`
- Проверьте файрвол Windows - разрешите порт 8000

### CORS ошибки
- Бэкенд настроен на разрешение всех источников (`allow_origins=["*"]`)
- Если проблемы остаются, проверьте логи бэкенда

### Фронтенд не может подключиться к бэкенду
- Проверьте, что бэкенд запущен: `netstat -ano | findstr :8000`
- Проверьте консоль браузера на ошибки
- Убедитесь, что используете правильный IP адрес

## Открытие портов в файрволе Windows

Если нужно открыть порты вручную:

```powershell
# Открыть порт 5173 (фронтенд)
New-NetFirewallRule -DisplayName "Vite Dev Server" -Direction Inbound -LocalPort 5173 -Protocol TCP -Action Allow

# Открыть порт 8000 (бэкенд)
New-NetFirewallRule -DisplayName "FastAPI Backend" -Direction Inbound -LocalPort 8000 -Protocol TCP -Action Allow
```

